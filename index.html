<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safety Dodger – 제조업 안전 에디션</title>
  <style>
    :root{color-scheme:dark light}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,sans-serif;background:#0b1220;color:#e6eaf3}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .grid{display:grid;gap:20px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:#101826;border:1px solid #233044;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .card .hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #233044}
    .card .bd{padding:16px}
    .btn{border:0;border-radius:12px;padding:8px 12px;background:#2b3a4f;color:#e6eaf3;cursor:pointer}
    .btn:hover{filter:brightness(1.1)}
    .btn.green{background:#1f8b4c}
    .btn.amber{background:#b07a15}
    .btn.red{background:#b83a3a}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .field{background:#0d1522;border:1px solid #233044;border-radius:10px;padding:8px 10px;color:#e6eaf3;width:100%}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    table{width:100%;border-collapse:collapse;font-size:14px}
    th,td{padding:8px 6px;border-top:1px solid #233044}
    .hint{font-size:12px;color:#9fb0c7}
    .mobile{display:none}
    @media(max-width:899px){.mobile{display:flex;gap:10px;margin-top:10px}}
    .overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:end;justify-content:center;padding:16px}
    .modal{background:#0f1929;border:1px solid #233044;border-radius:16px;padding:14px;width:min(520px,92%)}
    .title{font-weight:700;font-size:18px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="grid">
      <!-- Game -->
      <div class="card">
        <div class="hd">
          <div class="title">Safety Dodger – 제조업 안전 에디션</div>
          <div class="row">
            <button id="startBtn" class="btn green">시작하기</button>
            <button id="pauseBtn" class="btn amber">일시정지</button>
            <button id="resetBtn" class="btn">리셋</button>
            <button id="helpBtn" class="btn">도움말</button>
          </div>
        </div>
        <div class="bd">
          <div style="position:relative;max-width:420px;margin:0 auto">
            <canvas id="cv" width="420" height="640" style="width:100%;border:1px solid #233044;border-radius:16px;display:block"></canvas>
            <div id="over" class="overlay" style="display:none">
              <div class="modal">
                <div class="title" style="text-align:center">게임 종료</div>
                <p style="text-align:center;margin:6px 0 10px 0">점수: <b id="finalScore">0</b></p>
                <div class="two">
                  <input id="dept" class="field" placeholder="부서" />
                  <input id="name" class="field" placeholder="성함" />
                </div>
                <div class="row" style="margin-top:10px;justify-content:flex-end">
                  <button id="saveBtn" class="btn green">리더보드에 등록</button>
                  <button id="closeOverBtn" class="btn">닫기</button>
                </div>
              </div>
            </div>
          </div>

          <div class="mobile">
            <button id="leftBtn" class="btn" style="flex:1">◀ 왼쪽</button>
            <button id="rightBtn" class="btn" style="flex:1">오른쪽 ▶</button>
          </div>

          <div id="help" class="hint" style="margin-top:10px;display:none">
            조작: 방향키(←/→) 또는 A/D. 모바일은 아래 버튼.<br/>
            규칙: 파란 블록(안전요소) 먹으면 +1점, 빨간 블록(불안전요소)에 맞으면 종료.<br/>
            난이도는 시간이 지날수록 빨라집니다. Space로 시작/재시작, P로 일시정지.
          </div>
        </div>
      </div>

      <!-- Leaderboard -->
      <div class="card">
        <div class="hd">
          <div class="title">리더보드</div>
          <div class="row">
            <button id="exportBtn" class="btn">내보내기</button>
            <button id="importBtn" class="btn">가져오기</button>
            <button id="clearBtn" class="btn red">전체삭제</button>
          </div>
        </div>
        <div class="bd">
          <div class="two" style="margin-bottom:10px">
            <input id="prefDept" class="field" placeholder="기본 부서(자동 채우기)" />
            <input id="prefName" class="field" placeholder="기본 성함(자동 채우기)" />
          </div>
          <p class="hint" style="margin:-6px 0 10px 0">입력하면 게임오버 창에 자동 채워져요. 데이터는 브라우저에만 저장됩니다.</p>

          <div style="overflow:auto">
            <table id="tbl">
              <thead>
                <tr><th>순위</th><th>부서</th><th>성함</th><th>점수</th><th>일시</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- Export/Import area -->
          <div id="io" style="margin-top:10px;display:none">
            <textarea id="jsonBox" class="field" style="height:140px;font-family:ui-monospace,Consolas,monospace"></textarea>
            <p class="hint">내보내기: JSON이 표시됩니다. 복사하세요. / 가져오기: JSON을 붙여넣고 ‘가져오기’ 버튼을 다시 누르세요.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// --- 게임 로직 (JS) ---
// (내용은 생략 없이 위에서 작성한 버전 그대로 삽입해야 정상 실행됩니다.)
</script>
</body>
</html>